# DNS

- 作用：完成主机名到IP地址的转换
- 查询方式
  - **递归查询(**收到准确答复)
  - **迭代查询**(收到下一个请求地址)
- 使用**UDP**，53端口
- DNS劫持：修改域名解析的结果
- DNS污染：通往国外的网关上

```javascript
// 回答模版
1. 起源：tcp/ip基于IP地址，只能识别网络通讯时只能识别IP地址，所以需要DNS解析
2. 过程：浏览器缓存 => 系统缓存 => 路由器缓存 => ISP的DNS缓存 => 从根域名服务器开始查询
3. 方式： 递归迭代
4. 作用：DNS劫持、污染
5. 前端相关：
		'dns-prefetch' 预解析 meta信息声明，link标签指定预解析
```



### 域名分散处理

- 解决浏览器并发连接数问题
- 解决cookie污染问题



### 浏览器限制同域并发请求



### 页面渲染

DOM树的构建是从接受到文档开始的，先将字节转化为字符，然后字符转化为标记，接着标记构建dom树。这个过程被分为标记化和树构建
而这是一个渐进的过程。为达到更好的用户体验，呈现引擎会力求尽快将内容显示在屏幕上。它不必等到整个 HTML 文档解析完毕之后，就会开始构建呈现树和设置布局。在不断接收和处理来自网络的其余内容的同时，呈现引擎会将部分内容解析并显示出来。

- css加载  [知乎上的一个实验](https://zhuanlan.zhihu.com/p/43282197)
  - 不会阻塞DOM树的解析.     ` DOM树和CSSDOM树不在一个线程`
  - 会阻塞DOM树的渲染,         `render tree的构建需要CSSDOM tree`
  - 会阻塞后面的JS执行，        `JS 执行可能要获取css信息`
- 三个过程会有交叉地进行
  - 加载   ==》 加载html，css，js
  - 解析   ==》 构建DOM tree、CSSDOM tree、执行JS
  - 渲染  ==》 渲染render tree
- 小结
  - css加载和解析，会阻塞JS，渲染
  - js加载和解析，会阻塞所有
    - async，加载不阻塞，执行会阻塞所有，==异步执行==
    - defer，加载和执行都不阻塞，执行会在所有元素解析之后完成，==同步执行==